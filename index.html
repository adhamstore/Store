





Conversation with Gemini

make me input box the with the same design as the search result box but the same height and width as the input search box i want you to add name field and serial no. field and in stock field and make button to upload image when pressed on and submit to send all these data to the firebase to save at and show in the search resuly want this input box above the input search box <!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Item Search</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>


<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";

import { getFirestore, collection, getDocs, doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";


const firebaseConfig = {

apiKey: "AIzaSyAeNnTbv...",

authDomain: "store-fdde6.firebaseapp.com",

projectId: "store-fdde6",

storageBucket: "store-fdde6.appspot.com",

messagingSenderId: "89613962927",

appId: "1:89613962927:web:5646e8be819cc88ca28e5a",

measurementId: "G-25Y158ELFL"

};



const app = initializeApp(firebaseConfig);

const db = getFirestore(app);



let items = [];



async function fetchFirestoreData() {

console.log("Fetching Firestore data...");

const resultsContainer = document.getElementById('results');

resultsContainer.innerHTML = '';



try {

const querySnapshot = await getDocs(collection(db, "items"));

items = querySnapshot.docs.map(doc => ({

id: doc.id,

...doc.data()

}));

items.sort((a, b) => a.name.localeCompare(b.name));

renderItems(items);

} catch (error) {

console.error("Error fetching Firestore data:", error);

}

}



function renderItems(filteredItems) {

const resultsContainer = document.getElementById('results');

resultsContainer.innerHTML = '';



filteredItems.forEach(item => {

const li = document.createElement('li');

li.classList.add('item');

li.innerHTML = <div class="item-info">

<label>Name:</label> <input type="text" value="${item.name}" id="name-${item.id}" disabled>

<label>Serial:</label> <input type="text" value="${item.serial}" id="serial-${item.id}" disabled>

<label>In Storage:</label> <input type="text" value="${item.stock}" id="stock-${item.id}" disabled>

</div>

<img src="${item.image}" alt="Item Image" class="popup-image" onclick="openModal('${item.image}')">

<div class="actions">

<button onclick="enableEdit('${item.id}')">Edit</button>

<button onclick="submitEdit('${item.id}')" style="display:none;" id="submit-${item.id}">Submit</button>

<button onclick="deleteItem('${item.id}')">Delete</button>

</div>

; resultsContainer.appendChild(li);

});

}



window.enableEdit = function(id) {

document.getElementById(name-${id}).disabled = false;

document.getElementById(serial-${id}).disabled = false;

document.getElementById(stock-${id}).disabled = false;

document.getElementById(submit-${id}).style.display = 'inline';

};



window.submitEdit = async function(id) {

const name = document.getElementById(name-${id}).value;

const serial = document.getElementById(serial-${id}).value;

const stock = document.getElementById(stock-${id}).value;



try {

await updateDoc(doc(db, "items", id), { name, serial, stock });

alert("Item updated successfully");

fetchFirestoreData();

} catch (error) {

console.error("Error updating document:", error);

}

};



window.deleteItem = async function(id) {

if (confirm("Are you sure you want to delete this item?")) {

try {

await deleteDoc(doc(db, "items", id));

alert("Item deleted successfully");

fetchFirestoreData();

} catch (error) {

console.error("Error deleting document:", error);

}

}

};



document.getElementById('search').addEventListener('input', function () {

const query = this.value.toLowerCase();

const filteredItems = items.filter(item => item.name.toLowerCase().includes(query));

renderItems(filteredItems);

});



fetchFirestoreData();

</script>


<style>

body { font-family: 'Arial', sans-serif; background: #f4f4f4; display: flex; flex-direction: column; align-items: center; }

.controls { width: 50%; background: #ffffff; padding: 10px; display: flex; justify-content: center; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1); border-radius: 10px; margin-bottom: 10px; }

#search { width: 100%; padding: 8px; font-size: 16px; border: 2px solid #888; border-radius: 6px; }

.container { width: 90%; margin-top: 20px; }

.item-list { list-style: none; padding: 0; width: 100%; }

.item { display: flex; align-items: center; justify-content: space-between; padding: 15px; border: 2px solid #ddd; border-radius: 10px; background: white; margin-bottom: 12px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }

.popup-image { width: 100px; height: 80px; object-fit: cover; border-radius: 8px; margin-left: 10px; cursor: pointer; transition: transform 0.3s ease-in-out; }

.popup-image:hover { transform: scale(1.2); }

.actions { display: flex; gap: 10px; }

</style>

</head>

<body>

<div class="controls">

<input type="text" id="search" placeholder="Search for an item...">

</div>

<div class="container">

<ul id="results" class="item-list"></ul>

</div>

</body>

</html> add button at the right side of the search box and outside the box with keeping the search box at the middle as it is, when pressed on show this input box and after submit pressed it will pop down again 



HTML

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Search</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
        import { getFirestore, collection, getDocs, doc, updateDoc, deleteDoc, addDoc } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-storage.js";

        // ... (Firebase initialization code remains the same)

        let items = [];
        let isAddingNewItem = false; // Flag to track input box visibility

        // ... (fetchFirestoreData, renderItems, enableEdit, submitEdit, deleteItem remain the same)

        document.getElementById('search').addEventListener('input', function () {
            // ... (search functionality remains the same)
        });

        document.getElementById('addItemButton').addEventListener('click', () => {
            isAddingNewItem = !isAddingNewItem;
            document.getElementById('newItemForm').style.display = isAddingNewItem ? 'block' : 'none';
        });

        document.getElementById('newItemForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const name = document.getElementById('newItemName').value;
            const serial = document.getElementById('newItemSerial').value;
            const stock = document.getElementById('newItemStock').value;
            const imageFile = document.getElementById('newItemImage').files[0];

            try {
                if (imageFile) {
                    const storage = getStorage(app);
                    const imageRef = ref(storage, `images/${imageFile.name}`);
                    const snapshot = await uploadBytes(imageRef, imageFile);
                    const imageUrl = await getDownloadURL(snapshot.ref);

                    await addDoc(collection(db, "items"), { name, serial, stock, image: imageUrl });
                    alert("Item added successfully!");
                } else {
                    await addDoc(collection(db, "items"), { name, serial, stock }); // No image
                    alert("Item added successfully (without image)!");
                }

                document.getElementById('newItemForm').reset(); // Clear form
                isAddingNewItem = false;
                document.getElementById('newItemForm').style.display = 'none';
                fetchFirestoreData(); // Refresh item list
            } catch (error) {
                console.error("Error adding item:", error);
                alert("Error adding item. Please try again.");
            }
        });

        fetchFirestoreData();
    </script>

    <style>
        /* ... (Existing styles remain the same) */
        .controls {
            width: 50%;
            background: #ffffff;
            padding: 10px;
            display: flex;
            justify-content: center; /* Center the search bar */
            align-items: center; /* Vertically center content */
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            margin-bottom: 10px;
            position: relative; /* For positioning the button */
        }

        #addItemButton {
            position: absolute;
            right: 10px; /* Position on the right */
            top: 50%;
            transform: translateY(-50%); /* Vertically center */
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #newItemForm {
            display: none; /* Initially hidden */
            width: 50%; /* Same width as controls */
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        #newItemForm label {
            display: block;
            margin-bottom: 5px;
        }

        #newItemForm input[type="text"],
        #newItemForm input[type="number"] {
            width: calc(100% - 10px); /* Adjust width for padding */
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        #newItemForm button[type="submit"] {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="controls">
        <input type="text" id="search" placeholder="Search for an item...">
        <button id="addItemButton">Add Item</button>
    </div>

    <form id="newItemForm">
        <label for="newItemName">Name:</label>
        <input type="text" id="newItemName" required><br><br>

        <label for="newItemSerial">Serial No.:</label>
        <input type="text" id="newItemSerial" required><br><br>

        <label for="newItemStock">In Stock:</label>
        <input type="number" id="newItemStock" required><br><br>

        <label for="newItemImage">Image:</label>
        <input type="file" id="newItemImage"><br><br>

        <button type="submit">Submit</button>
    </form>


    <div class="container">
        <ul id="results" class="item-list"></ul>
    </div>
</body>
</html>
Key changes:

Add Item Button: Added a button with id="addItemButton" outside the search box but within the controls div. It's positioned absolutely to the right.
New Item Form: Created a form with id="newItemForm" containing input fields for name, serial, stock, and image upload. It's initially hidden using display: none;.
Button Click Handler: Added an event listener to the "Add Item" button to toggle the visibility of the newItemForm.
Form Submission: Added an event listener to the form's submit event. It retrieves the input values, including the image file, uploads the image to Firebase Storage, gets the download URL, and then adds the item data to Firestore. It also handles the case where no image is uploaded.
Firebase Storage: Added the necessary imports and code to interact with Firebase Storage for image uploads.
Form Reset: The form is reset after a successful submission.
CSS: Added CSS rules to style the button, the form, and the input fields. The controls div now uses position: relative to allow absolute positioning of the button. Input fields in the form now have consistent widths.
Now, when you click the "Add Item" button, the input form will appear above the search bar. After submitting the form, the data will be sent to Firebase, the form will be hidden, and the item list will be refreshed.  The image, if provided, will be stored in Firebase Storage, and its URL will be saved with the item data in Firestore.











Gemini can make mistakes, so double-check it

